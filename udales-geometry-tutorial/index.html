
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the building-resolving urban multi-physics code uDALES">
      
      
        <meta name="author" content="The uDALES Team">
      
      
        <link rel="canonical" href="https://uDALES.github.io/u-dales/udales-geometry-tutorial/">
      
      
        <link rel="prev" href="../udales-boundary-conditions/">
      
      
        <link rel="next" href="../udales-copy-inputs/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Geometry generation - uDALES</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#udales-urban-surface-creation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="uDALES" class="md-header__button md-logo" aria-label="uDALES" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            uDALES
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Geometry generation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/uDALES/u-dales" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    u-dales
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="uDALES" class="md-nav__button md-logo" aria-label="uDALES" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    uDALES
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/uDALES/u-dales" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    u-dales
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Simulation inputs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Simulation inputs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-namoptions-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    List of input parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-boundary-conditions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Boundary conditions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Geometry generation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Geometry generation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialising-udbase" class="md-nav__link">
    <span class="md-ellipsis">
      Initialising udbase
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-udgeom-class" class="md-nav__link">
    <span class="md-ellipsis">
      The udgeom class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreateflatsurface" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createFlatSurface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreatecanyons" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createCanyons
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreatecubes" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createCubes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreaterealistic" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createRealistic
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-copy-inputs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Copying from other simulations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-driver-simulations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Precursor simulations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Running the simulation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Running the simulation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-pre-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-simulation-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running uDALES
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-post-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Post-processing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data post-processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Data post-processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-udbase-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    udbase
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-fields-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flow fields and statistics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-facets-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Facets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-utility-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utility routines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-example-simulations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example simulations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-how-to-cite/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to cite
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-pub-list/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publication list
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../DEVELOP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development notes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to contribute
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../udales-docs-software/index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Software docs
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#initialising-udbase" class="md-nav__link">
    <span class="md-ellipsis">
      Initialising udbase
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-udgeom-class" class="md-nav__link">
    <span class="md-ellipsis">
      The udgeom class
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreateflatsurface" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createFlatSurface
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreatecanyons" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createCanyons
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreatecubes" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createCubes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#udgeomcreaterealistic" class="md-nav__link">
    <span class="md-ellipsis">
      udgeom.createRealistic
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="udales-urban-surface-creation">uDALES urban surface creation<a class="headerlink" href="#udales-urban-surface-creation" title="Permanent link">&para;</a></h1>
<p>uDALES supports several manners to create urban surfaces. It is possible to run uDALES without specifying an urban surface, in which case a flat terrain is assumed. In most cases however, an urban surface will be specified. uDALES contains a number of functions in the <a href="#the-udgeom-class"><strong>udgeom</strong></a> package that aid geometry generation:</p>
<ul>
<li><a href="#udgeomcreateflatsurface"><strong>udgeom.createFlatSurface</strong></a>. This function creates a flat surface. The main reason for using this function is to be able to discretise the surface in as many facets as possible in case heterogeneous boundary conditions are required.</li>
<li><a href="#udgeomcreatecanyons"><strong>udgeom.createCanyons</strong></a>. This function creates one-dimensional street canyons.</li>
<li><a href="#udgeomcreatecubes"><strong>udgeom.createCubes</strong></a>. This function creates cubes, either a single one or an array of cubes.</li>
<li><a href="#udgeomcreaterealistic"><strong>udgeom.createRealistic</strong></a>. This function creates a realistic urban surface based on an stl file that contains the buildings. The function adds the ground surface.</li>
</ul>
<p><strong>The live matlab file of this tutorial can be found in the repository in the folder /docs/tutorial_mlx.</strong></p>
<h2 id="initialising-udbase">Initialising udbase<a class="headerlink" href="#initialising-udbase" title="Permanent link">&para;</a></h2>
<p><strong>Note that the uDALES/tools/matlab path must be added via the Set Path button in order to use the udgeom package. Alternatively, it can be added using the addpath function inside the script (done here).</strong></p>
<div class="highlight"><pre><span></span><code><span class="c">% preamble</span>
<span class="nb">clear</span><span class="w"> </span><span class="n">variables</span>
<span class="nb">close</span><span class="w"> </span><span class="nb">all</span>

<span class="c">% add the uDALES matlab path</span>
<span class="nb">addpath</span><span class="p">(</span><span class="s">&#39;path_to_udales\tools\matlab&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="the-udgeom-class">The udgeom class<a class="headerlink" href="#the-udgeom-class" title="Permanent link">&para;</a></h2>
<p>The udgeom class contains the uDALES urban surface. It is the output of the geomety creation routines mentioned above. The class can load STL files, display the geometry and save to STL files as shown below.</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">udgeom</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  udgeom Geometry class for uDALES
     The udgeom class contains the triangulated surface.

    Documentation for udgeom.udgeom
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">geom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">udgeom</span><span class="p">();</span><span class="w">    </span><span class="c">% create udgeom instance.</span>
<span class="k">methods</span><span class="p">(</span><span class="n">geom</span><span class="p">);</span><span class="w">             </span><span class="c">% show the methods the class contains</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Methods for class udgeom.udgeom:

calculate_outline2d       chcpath                   get_building_outlines     get_buildings             get_face_to_building_map  get_outline               gohome                    gopath                    load                      save                      show                      show_outline              udgeom

Methods of udgeom.udgeom inherited from handle.
</code></pre></div>
<p>These methods can be used as follows</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">geom</span><span class="p">.</span><span class="n">load</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>--- help for udgeom.udgeom/load ---

  load an STL file.

  example:
    obj.load(obj, filename)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">geom</span><span class="p">.</span><span class="n">save</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>--- help for udgeom.udgeom/save ---

  save an STL file.

  example:
    obj.save(obj, filename)
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">geom</span><span class="p">.</span><span class="n">show</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>--- help for udgeom.udgeom/show ---

  plot the geometry

  show(obj, colorbuildings)
        colorbuildings (optional): boolean parameter on whether
                                   to colour buildings. This
                                   parameter is true by default.
                                   Needs to be set to false for
                                   large geometries.

  examples:
    obj.show();
    obj.show(false);
</code></pre></div>
<p>Here is a simple example on how to use this class:</p>
<div class="highlight"><pre><span></span><code><span class="n">geom</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;uDALES.stl&#39;</span><span class="p">)</span><span class="w">    </span><span class="c">% load an STL file from the current directory (can be changed in constructor)</span>
<span class="n">geom</span><span class="p">.</span><span class="n">show</span><span class="p">();</span><span class="w">               </span><span class="c">% show the geometry</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="figure_0.png" src="../udales-geometry-tutorial_media/figure_0.png" /></p>
<p>Another way is to show the outline.</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">geom</span><span class="p">.</span><span class="n">show_outline</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>--- help for udgeom.udgeom/show_outline ---

  Plot the geometry outline edges

  show_outline(obj) plots the precomputed outline edges of the geometry
  show_outline(obj, angle_threshold) recalculates outline with custom threshold

  Parameters:
    angle_threshold (optional): Angle threshold in degrees for edge detection
                               If not provided, uses precomputed outline

  Examples:
    obj.show_outline();     % Use precomputed outline
    obj.show_outline(30);   % Recalculate with 30┬░ threshold
</code></pre></div>
<p>Here is a simple example on how to use this method:</p>
<div class="highlight"><pre><span></span><code><span class="n">geom</span><span class="p">.</span><span class="n">show_outline</span><span class="p">();</span><span class="w">               </span><span class="c">% show the geometry outline</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="figure_1.png" src="../udales-geometry-tutorial_media/figure_1.png" /></p>
<h2 id="udgeomcreateflatsurface">udgeom.createFlatSurface<a class="headerlink" href="#udgeomcreateflatsurface" title="Permanent link">&para;</a></h2>
<p>This function creates flat surfaces</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createFlatSurface</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  createFlatSurface    creates flat surface consisting of triangular facets

     geom = createFlatSurface(xsize, ysize, edgelength) returns a geom
     instance that can be saved to an stl file.
         xsize:  length of the domain in x-direction
         ysize:  length of the domain in y-direction
         edgelength: the length of individual facets. Best taken as xsize
         (or ysize) divided by an integer number.
</code></pre></div>
<p>See below for an example how to use this function.</p>
<div class="highlight"><pre><span></span><code><span class="c">% domain size</span>
<span class="n">xsize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">96</span><span class="p">;</span><span class="w">           </span><span class="c">% [m]</span>
<span class="n">ysize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">xsize</span><span class="p">;</span><span class="w">        </span><span class="c">% [m]</span>
<span class="n">edgelength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">xsize</span><span class="o">/</span><span class="mi">8</span><span class="p">;</span><span class="w"> </span><span class="c">% [m]</span>

<span class="n">geom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createFlatSurface</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="w"> </span><span class="n">ysize</span><span class="p">,</span><span class="w"> </span><span class="n">edgelength</span><span class="p">);</span>
<span class="n">geom</span><span class="p">.</span><span class="n">show</span><span class="p">;</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="figure_2.png" src="../udales-geometry-tutorial_media/figure_2.png" /></p>
<h2 id="udgeomcreatecanyons">udgeom.createCanyons<a class="headerlink" href="#udgeomcreatecanyons" title="Permanent link">&para;</a></h2>
<p>This function creates one-dimensional street canyons</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createCanyons</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  createCanyons    creates one-dimensional street canyons

     geom = createCanyons(xsize, ysize, B, W, H, shift, edgelength) returns
     a geom instance that can be saved to an stl file.
         xsize:      length of the domain in x-direction
         ysize:      length of the domain in y-direction
         B:          building width
         W:          street width
         H:          building height
         shift:      shifts the canyons to the right in the x-direction
         edgelength: the length of individual facets. Best taken as xsize
                     (or ysize) divided by an integer number.
         rotate90:   boolean that allows one to rotate the domain once it
                     has been generated. Set this parameter to false under
                     normal conditions.
</code></pre></div>
<p>See below for an example how to use this function.</p>
<div class="highlight"><pre><span></span><code><span class="c">% domain size</span>
<span class="n">xsize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">96</span><span class="p">;</span><span class="w">       </span><span class="c">% domain size in x-direction</span>
<span class="n">ysize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">96</span><span class="p">;</span><span class="w">       </span><span class="c">% domain size in y-direction</span>

<span class="c">% canyon properties</span>
<span class="n">B</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w">           </span><span class="c">% building width</span>
<span class="n">H</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w">           </span><span class="c">% building height</span>
<span class="n">W</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w">           </span><span class="c">% street width</span>
<span class="n">shift</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w">       </span><span class="c">% make the canyons start a distance from the west-boundary of the domain.</span>
<span class="w">                  </span><span class="c">% Note this makes the domain larger in the x-direction.</span>
<span class="n">edgelength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span><span class="w">   </span><span class="c">% facet size</span>
<span class="n">rotate90</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"> </span><span class="c">% default value</span>

<span class="n">geom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createCanyons</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="w"> </span><span class="n">ysize</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">W</span><span class="p">,</span><span class="w"> </span><span class="n">H</span><span class="p">,</span><span class="w"> </span><span class="n">shift</span><span class="p">,</span><span class="w"> </span><span class="n">edgelength</span><span class="p">,</span><span class="w"> </span><span class="n">rotate90</span><span class="p">);</span>
<span class="n">geom</span><span class="p">.</span><span class="n">show</span><span class="p">;</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="figure_3.png" src="../udales-geometry-tutorial_media/figure_3.png" /></p>
<h2 id="udgeomcreatecubes">udgeom.createCubes<a class="headerlink" href="#udgeomcreatecubes" title="Permanent link">&para;</a></h2>
<p>This function creates cubes, either a single one or an array of cubes.</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createCubes</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  createCubes    creates cubes, either a single one or an array of cubes.

     geom = createCubes(xsize, ysize, Hx, Hy, Hz, Cx, Cy, geom_option, edgelength)
     returns a geom instance that can be saved to an stl file.
         xsize:       length of the domain in x-direction
         ysize:       length of the domain in y-direction
         Hx:          cube x-length
         Hy:          cube y-length
         Hz:          cube height
         Cx:          cube spacing in x-direction
         Cy:          cube spacing in y-direction
         geom_option: the type of geometry to create:
                                 &#39;S&#39;: single cube
                                &#39;AC&#39;: aligned cubes
                                &#39;SC&#39;: staggered cubes
         edgelength: the length of individual facets. Best taken as xsize
                     (or ysize) divided by an integer number.
</code></pre></div>
<p>See below for an example how to use this function.</p>
<div class="highlight"><pre><span></span><code><span class="c">% domain size</span>
<span class="n">xsize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">96</span><span class="p">;</span>
<span class="n">ysize</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">96</span><span class="p">;</span>

<span class="c">% cube length in each direction</span>
<span class="n">Hx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="n">Hy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="n">Hz</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>

<span class="c">% canyon length in each direction</span>
<span class="n">Cx</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="n">Cy</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>

<span class="c">% geometry type</span>
<span class="c">%     S: single cube</span>
<span class="c">%    AC: aligned cubes</span>
<span class="c">%    SC: staggered cubes</span>

<span class="n">geom_type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;SC&#39;</span><span class="p">;</span>

<span class="n">edgelength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>

<span class="n">geom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createCubes</span><span class="p">(</span><span class="n">xsize</span><span class="p">,</span><span class="w"> </span><span class="n">ysize</span><span class="p">,</span><span class="w"> </span><span class="n">Hx</span><span class="p">,</span><span class="w"> </span><span class="n">Hy</span><span class="p">,</span><span class="w"> </span><span class="n">Hz</span><span class="p">,</span><span class="w"> </span><span class="n">Cx</span><span class="p">,</span><span class="w"> </span><span class="n">Cy</span><span class="p">,</span><span class="w"> </span><span class="n">geom_type</span><span class="p">,</span><span class="w"> </span><span class="n">edgelength</span><span class="p">);</span>
<span class="n">geom</span><span class="p">.</span><span class="n">show</span><span class="p">;</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>
<h2 id="udgeomcreaterealistic">udgeom.createRealistic<a class="headerlink" href="#udgeomcreaterealistic" title="Permanent link">&para;</a></h2>
<p>This function creates a realistic urban surface based on an stl file that contains the buildings. The function adds the ground surface.</p>
<div class="highlight"><pre><span></span><code><span class="nb">help</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createRealistic</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>  createRealistic    creates a realistic urban surface based on an stl file
                     that contains the buildings. The function adds the
                     ground surface.  

     geom = createRealistic(stlfile, xsize, ysize, shift, edgelength)
     returns a geom instance that can be saved to an stl file.
         stlfile:    the STL file that contains the buildings (NOT the
                     ground)
         xsize:      length of the new domain in x-direction
         ysize:      length of the new domain in y-direction
         shift:      array that shifts the geometry. shift[1], shift[2] and
                     shift[3] represent, respectively, the shift in x-, y-
                     and z-direction.
         edgelength: the length of individual facets. Best taken as xsize
                     (or ysize) divided by an integer number.
</code></pre></div>
<p>See below for an example how to use this function.</p>
<div class="highlight"><pre><span></span><code><span class="c">% stl file containing buildings only</span>
<span class="n">stlfile</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&#39;uDALES.stl&#39;</span><span class="p">;</span>

<span class="c">% original domain size</span>
<span class="n">xsize_og</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">256</span><span class="p">;</span>
<span class="n">ysize_og</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">128</span><span class="p">;</span>

<span class="c">% example translation to make domain larger in x direction</span>
<span class="n">shift</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">20</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="p">];</span>

<span class="c">% ground facet size</span>
<span class="n">edgelength</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>

<span class="n">geom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">udgeom</span><span class="p">.</span><span class="n">createRealistic</span><span class="p">(</span><span class="n">stlfile</span><span class="p">,</span><span class="w"> </span><span class="n">xsize_og</span><span class="p">,</span><span class="w"> </span><span class="n">ysize_og</span><span class="p">,</span><span class="w"> </span><span class="n">shift</span><span class="p">,</span><span class="w"> </span><span class="n">edgelength</span><span class="p">);</span>
<span class="n">geom</span><span class="p">.</span><span class="n">show</span><span class="p">;</span>
<span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;x [m]&#39;</span><span class="p">);</span>
<span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;y [m]&#39;</span><span class="p">)</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      The uDALES Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>